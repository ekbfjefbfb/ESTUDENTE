# =============================================
# VARIABLES DE ENTORNO - BACKEND SUPER IA v3.0
# Template completo para Producci√≥n
# =============================================

# =============================================
# üåç CONFIGURACI√ìN GENERAL
# =============================================
ENVIRONMENT=production
DEBUG=false
APP_NAME="Backend Super IA"
APP_VERSION="3.0.0"

# Secret key para JWT y sesiones (generar con: openssl rand -hex 64)
SECRET_KEY=GENERA_UNA_KEY_SUPER_SEGURA_DE_64_CARACTERES_MINIMO_AQUI

LOG_LEVEL=INFO

# =============================================
# üóÑÔ∏è BASE DE DATOS - SUPABASE POSTGRESQL
# =============================================

# Connection URL async (para SQLAlchemy async)
# Formato: postgresql+asyncpg://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres
DATABASE_URL=postgresql+asyncpg://postgres.TU_PROJECT_REF:TU_PASSWORD@aws-0-us-east-1.pooler.supabase.com:5432/postgres

# Connection URL sync (para migraciones Alembic)
# Formato: postgresql://postgres.[PROJECT_REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres
DATABASE_URL_SYNC=postgresql://postgres.TU_PROJECT_REF:TU_PASSWORD@aws-0-us-east-1.pooler.supabase.com:5432/postgres

# Supabase adicional (opcional pero recomendado)
SUPABASE_URL=https://TU_PROJECT_REF.supabase.co
SUPABASE_KEY=TU_SUPABASE_ANON_KEY
SUPABASE_SERVICE_KEY=TU_SUPABASE_SERVICE_ROLE_KEY

# Pool de conexiones (ya optimizado en c√≥digo, pero puedes ajustar)
DB_POOL_SIZE=50
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DATABASE_TIMEOUT_SECONDS=10

# =============================================
# üî¥ REDIS - PARA CACHE Y MULTIUSUARIO
# =============================================

# OPCI√ìN 1: Redis Cloud (RECOMENDADO para producci√≥n y cargas altas)
# Formato: redis://default:[PASSWORD]@redis-12345.c1.us-east-1-2.ec2.cloud.redislabs.com:12345
REDIS_URL=redis://default:TU_PASSWORD_REDIS@redis-xxxxx.c1.us-east-1-2.ec2.cloud.redislabs.com:12345

# OPCI√ìN 2: Upstash Redis (Serverless, buena alternativa)
# REDIS_URL=redis://default:TU_PASSWORD@us1-aware-xxxxx.upstash.io:6379

# OPCI√ìN 3: Render Redis (si usas Render.com)
# REDIS_URL=redis://red-xxxxx:6379

# Configuraci√≥n de Redis (ya optimizado en c√≥digo)
REDIS_MAX_CONNECTIONS=200
REDIS_PASSWORD=TU_PASSWORD_REDIS_SI_APLICA

# =============================================
# üîê JWT Y AUTENTICACI√ìN
# =============================================

# JWT Secret (diferente de SECRET_KEY, generar con: openssl rand -hex 64)
JWT_SECRET_KEY=GENERA_OTRA_KEY_SUPER_SEGURA_DIFERENTE_DE_SECRET_KEY

JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_EXPIRATION_DAYS=7



# Google OAuth (obtener en: https://console.cloud.google.com/)
GOOGLE_CLIENT_ID=xxxxx-xxxxxx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-xxxxxxxxxxxxxxxxxxxxx

# Microsoft OAuth (opcional)
MICROSOFT_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
MICROSOFT_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# GitHub OAuth (opcional)
GITHUB_CLIENT_ID=Iv1.xxxxxxxxxxxxxxxx
GITHUB_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Apple OAuth (opcional)
APPLE_CLIENT_ID=com.tuapp.service
APPLE_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================
# üåê CORS (IMPORTANTE PARA FRONTEND)
# =============================================

# Or√≠genes permitidos (separados por comas)
# Producci√≥n: solo tus dominios
# Desarrollo: incluir localhost
CORS_ORIGINS=https://tu-frontend.com,https://www.tu-frontend.com,https://app.tu-dominio.com

# Para desarrollo local tambi√©n a√±adir:
# CORS_ORIGINS=https://tu-frontend.com,http://localhost:3000,http://localhost:5173

# =============================================
# üì° APIS EXTERNAS
# ============================================
# Stability AI (para generaci√≥n de im√°genes)
STABILITY_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================
# üíæ STORAGE - BACKBLAZE B2 (OPCIONAL)
# =============================================

# Backblaze B2 para almacenar archivos (alternativa a S3)
B2_APPLICATION_KEY_ID=xxxxxxxxxxxxxxxxx
B2_APPLICATION_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
B2_BUCKET_NAME=mi-backend-super-files

# Tipo de storage (local | b2 | s3)
STORAGE_TYPE=b2

# AWS S3 (alternativa a B2)
# AWS_ACCESS_KEY_ID=xxxxxxxxxxxxxxxxxxxx
# AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# AWS_REGION=us-east-1
# S3_BUCKET_NAME=mi-bucket

# =============================================
# üéØ MONITOREO Y ERROR TRACKING
# =============================================

# Sentry para error tracking (obtener en: https://sentry.io/)
SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o1234567.ingest.sentry.io/1234567

# Habilitar m√©tricas Prometheus
METRICS_ENABLED=true

# =============================================
# üîí RATE LIMITING
# =============================================

# Habilitar rate limiting
RATE_LIMIT_ENABLED=true

# L√≠mite general (requests por minuto)
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================
# ‚è±Ô∏è TIMEOUTS
# =============================================

# Timeout general de requests (segundos)
REQUEST_TIMEOUT_SECONDS=30

# Timeout de base de datos (segundos)
DATABASE_TIMEOUT_SECONDS=10

# Timeout de APIs externas (segundos)
EXTERNAL_API_TIMEOUT_SECONDS=15

# =============================================
# üöÄ WORKERS Y PERFORMANCE
# =============================================

# N√∫mero de workers (para producci√≥n: 4-8)
MAX_WORKERS=4

# Conexiones por worker
WORKER_CONNECTIONS=1000

# Host y puerto
HOST=0.0.0.0
PORT=8000

# =============================================
# üéõÔ∏è FEATURE FLAGS
# =============================================

# Sistema de permisos
FEATURE_PERMISSIONS_SYSTEM=true

# Vision Pipeline (YOLO8 + OCR)
FEATURE_VISION_PIPELINE=true
VISION_PIPELINE_ENABLED=true
VISION_DEVICE=auto
YOLO_MODEL_PATH=yolov8n.pt
OCR_LANGUAGES=es,en
VISION_MAX_FILE_SIZE_MB=10

# B√∫squeda sem√°ntica
FEATURE_SEMANTIC_SEARCH=true

# Agentes personales
FEATURE_PERSONAL_AGENTS=true

# Chat h√≠brido
FEATURE_HYBRID_CHAT=true

# Analytics avanzado
FEATURE_ANALYTICS=true

# =============================================
# üîß CONFIGURACIONES ADICIONALES
# =============================================

# Hosts permitidos adicionales
ADDITIONAL_HOSTS=api.tudominio.com,backend.tudominio.com

# Cache TTL (segundos)
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# Health check
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=5

# =============================================
# üìß EMAIL (OPCIONAL)
# =============================================

# SMTP para env√≠o de emails
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=tu-email@gmail.com
# SMTP_PASSWORD=tu-password-app
# SMTP_FROM=noreply@tudominio.com

# =============================================
# üîî NOTIFICACIONES (OPCIONAL)
# =============================================

# Slack para notificaciones
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxxxx/xxxxx/xxxxx

# Discord para notificaciones
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/xxxxx/xxxxx

# =============================================
# üìä ANALYTICS (OPCIONAL)
# =============================================

# Google Analytics
# GA_TRACKING_ID=G-XXXXXXXXXX

# Mixpanel
# MIXPANEL_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# =============================================
# üåç INTERNACIONALIZACI√ìN
# =============================================

# Idioma por defecto
DEFAULT_LANGUAGE=es

# Zona horaria
TZ=America/Mexico_City

# =============================================
# üß™ TESTING Y DEVELOPMENT
# =============================================

# Solo para desarrollo/staging
# ENABLE_DEBUG_TOOLBAR=false
# ENABLE_PROFILER=false
# ENABLE_SQL_ECHO=false

# =============================================
# NOTAS IMPORTANTES
# =============================================

# 1. SEGURIDAD:
#    - NUNCA commitear este archivo con valores reales
#    - Usar .gitignore para excluir .env
#    - En producci√≥n, usar secrets manager (AWS Secrets, HashiCorp Vault)
#
# 2. GENERACI√ìN DE KEYS:
#    - SECRET_KEY: openssl rand -hex 64
#    - JWT_SECRET_KEY: openssl rand -hex 64
#
# 3. SUPABASE:
#    - Obtener URLs en: Project Settings > Database > Connection String
#    - Usar "Connection pooling" con "Transaction" mode
#
# 4. REDIS CLOUD:
#    - Recomendado: Plan de 1GB con replicaci√≥n
#    - Configurar eviction policy: allkeys-lru
#    - Habilitar persistence: RDB + AOF
#
# 5. GROK-4:
#    - Obtener API key en: https://console.x.ai/
#    - Monitorear uso y costos
#    - Configurar l√≠mites de gasto
#
# 6. CORS:
#    - En producci√≥n: solo tus dominios
#    - No usar "*" en producci√≥n
#
# 7. WORKERS:
#    - Desarrollo: 1 worker
#    - Producci√≥n peque√±a: 2-4 workers
#    - Producci√≥n grande: 8-16 workers

# =============================================
# FIN DE CONFIGURACI√ìN
# =============================================
